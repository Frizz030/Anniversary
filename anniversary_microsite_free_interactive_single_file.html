<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy 7 Months ‚ù§Ô∏è</title>
  <meta name="description" content="A tiny, interactive anniversary site." />
  <style>
    :root{
      --bg:#0f1020;--card:#17182e;--ink:#ffffff;--muted:#aab;--accent:#ff5ea8;--accent2:#7cf6ff;--ring:#ffd166
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 10% 10%, #151635 0%, var(--bg) 50%),
                  radial-gradient(1000px 800px at 90% 0%, #141a30 0%, transparent 60%),
                  radial-gradient(1000px 800px at 50% 120%, #141a30 0%, transparent 60%);
      color:var(--ink); line-height:1.6
    }
    a{color:var(--accent)}
    .wrap{max-width:1000px;margin:0 auto;padding:24px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.06);
      border-radius:20px;box-shadow: 0 10px 40px rgba(0,0,0,.35);backdrop-filter: blur(4px)}
    .pad{padding:24px}
    h1,h2,h3{letter-spacing:.5px;margin:0 0 10px}
    h1{font-size:clamp(28px,5vw,44px)}
    h2{font-size:clamp(22px,3.5vw,28px);color:var(--accent2)}
    .muted{color:var(--muted)}
    .grid{display:grid;gap:16px}
    @media(min-width:700px){.grid-2{grid-template-columns: 1fr 1fr}}

    /* Floating hearts background */
    .hearts{position:fixed;inset:0;overflow:hidden;pointer-events:none;z-index:-1}
    .heart{position:absolute;opacity:.08;font-size:20px;animation: floatUp 12s linear infinite}
    @keyframes floatUp{0%{transform:translateY(120vh) scale(.8) rotate(0)}100%{transform:translateY(-20vh) scale(1.3) rotate(360deg)}}

    /* Buttons */
    .btn{display:inline-flex;align-items:center;gap:8px;border-radius:999px;padding:10px 16px;border:1px solid rgba(255,255,255,.12);background:#1c1e3c;color:#fff;cursor:pointer}
    .btn:hover{border-color:var(--accent)}

    /* Gallery */
    .gallery{display:grid;grid-template-columns: repeat(2,1fr);gap:10px}
    @media(min-width:760px){.gallery{grid-template-columns: repeat(4,1fr)}}
    .gallery img{width:100%;height:160px;object-fit:cover;border-radius:14px;border:1px solid rgba(255,255,255,.1)}

    /* Timeline */
    .timeline{position:relative;margin:10px 0 0 10px}
    .timeline::before{content:"";position:absolute;left:10px;top:0;bottom:0;width:2px;background:linear-gradient(var(--accent),transparent)}
    .milestone{position:relative;margin-left:28px;padding:8px 0}
    .dot{position:absolute;left:-18px;top:14px;width:10px;height:10px;background:var(--accent);border-radius:50%;box-shadow:0 0 0 4px rgba(255,94,168,.15)}

    /* Typewriter */
    .type{min-height:64px;white-space:pre-wrap}

    /* Quiz */
    .quiz q{font-style:italic}
    .quiz .opt{margin:.35rem 0}
    .quiz .opt input{margin-right:6px}
    .correct{color:#7CFFAE}
    .wrong{color:#ff8a8a}

    /* Reveal */
    details{background:#1a1b36;border:1px solid rgba(255,255,255,.08);padding:14px;border-radius:12px}
    summary{cursor:pointer}

    /* Footer */
    footer{opacity:.8;font-size:14px}

    .flex{display:flex;gap:12px;flex-wrap:wrap}
    .pill{background:#1f2040;border:1px solid rgba(255,255,255,.08);border-radius:999px;padding:6px 10px}
  </style>
</head>
<body>
  <div class="hearts" id="hearts"></div>
  <div class="wrap">
    <header class="card pad" style="text-align:center">
      <h1>Happy 7 Months, <span id="partnerName">My Love</span> ‚ú®</h1>
      <p class="muted">Us since <span id="sinceText">(set date)</span> ‚Ä¢ <span id="counter">‚Ä¶</span></p>
      <div class="flex" style="justify-content:center">
        <button class="btn" id="editBtn">‚úèÔ∏è Edit names & date</button>
        <button class="btn" id="confettiBtn">üéâ Celebrate</button>
        <button class="btn" id="shareBtn">üîó Share link</button>
      </div>
    </header>

    <main class="grid grid-2" style="margin-top:16px">
      <section class="card pad">
        <h2>Our Little Timeline</h2>
        <div class="timeline" id="timeline">
          <!-- Edit these to your real moments -->
          <div class="milestone"><span class="dot"></span><strong>First DM:</strong> You said ‚Äúhi‚Äù and my day leveled up.
          </div>
          <div class="milestone"><span class="dot"></span><strong>First date:</strong> Fries, laughs, and butterflies.
          </div>
          <div class="milestone"><span class="dot"></span><strong>Inside joke unlocked:</strong> Our secret emoji üê£.
          </div>
          <div class="milestone"><span class="dot"></span><strong>7 months:</strong> Writing this, smiling like a dork.
          </div>
        </div>
      </section>

      <section class="card pad">
        <h2>Mini Gallery</h2>
        <p class="muted">Swap these with your photos (drag & drop into the file when you host, or edit the <code>src</code> URLs).</p>
        <div class="gallery">
          <img alt="us1" src="https://images.unsplash.com/photo-1529336953121-4a122118b9e7?q=80&w=800&auto=format&fit=crop"/>
          <img alt="us2" src="https://images.unsplash.com/photo-1524504388940-b1c1722653e1?q=80&w=800&auto=format&fit=crop"/>
          <img alt="us3" src="https://images.unsplash.com/photo-1524504388940-b1c1722653e1?q=80&w=800&auto=format&fit=crop"/>
          <img alt="us4" src="https://images.unsplash.com/photo-1517841905240-472988babdf9?q=80&w=800&auto=format&fit=crop"/>
        </div>
      </section>

      <section class="card pad">
        <h2>Letter to <span id="nameInline">you</span></h2>
        <div class="type" id="typewriter"></div>
        <details style="margin-top:8px"><summary>See full letter</summary>
          <p id="fullLetter">Seven months in and I still get nervous-smiley when I see your name on my phone. Thank you for the laughs, the patience, and the little everyday moments that feel huge to me. Here‚Äôs to more walks, more late‚Äënight snacks, and more ‚Äòus.‚Äô</p>
        </details>
      </section>

      <section class="card pad">
        <h2>Us Quiz üíò</h2>
        <div class="quiz" id="quiz"></div>
        <button class="btn" id="checkQuiz">Check answers</button>
        <p id="quizResult" class="muted"></p>
      </section>

      <section class="card pad">
        <h2>Our Playlist</h2>
        <p class="muted">Paste a Spotify/Apple link below and press Enter.</p>
        <input id="musicInput" placeholder="e.g. https://open.spotify.com/playlist/..." style="width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:#151739;color:#fff"/>
        <div id="musicEmbed" style="margin-top:12px"></div>
      </section>

      <section class="card pad">
        <h2>Countdown to 1‚ÄëYear üéØ</h2>
        <p class="muted">We‚Äôre counting down to your 1‚Äëyear anniversary based on the date you set.</p>
        <h3 id="countdown">‚Äî</h3>
      </section>
    </main>

    <footer class="pad" style="text-align:center">
      <div class="pill">Made with ‚ù§Ô∏è by <span id="meName">Me</span> for <span id="herName">You</span></div>
    </footer>
  </div>

  <script>
    // ---------- Personalization ----------
    const store = {
      get(){try{return JSON.parse(localStorage.getItem('annivSite')||'{}')}catch(e){return{}}},
      set(v){localStorage.setItem('annivSite',JSON.stringify(v))}
    }

    const state = Object.assign({
      partnerName:"My Love",
      meName:"Me",
      startDate:null, // yyyy-mm-dd
      musicUrl:null,
    }, store.get())

    const el = id=>document.getElementById(id)

    function syncUI(){
      el('partnerName').textContent = state.partnerName || 'My Love'
      el('nameInline').textContent = state.partnerName?.split(' ')[0]||'you'
      el('meName').textContent = state.meName||'Me'
      el('herName').textContent = state.partnerName||'You'

      if(state.startDate){
        const dt = new Date(state.startDate)
        el('sinceText').textContent = dt.toLocaleDateString()
        el('counter').textContent = sinceText(dt)
        updateOneYearCountdown(dt)
      } else {
        el('sinceText').textContent = '(set date)'
        el('counter').textContent = '‚Äî'
        el('countdown').textContent = '‚Äî'
      }

      if(state.musicUrl){
        embedMusic(state.musicUrl)
        el('musicInput').value = state.musicUrl
      }
    }

    function sinceText(start){
      const now = new Date()
      const ms = now - start
      const days = Math.floor(ms/86400000)
      const months = Math.floor(days/30.437)
      return `${months} months ‚Ä¢ ${days} days together`
    }

    function updateOneYearCountdown(start){
      const oneYear = new Date(start)
      oneYear.setFullYear(oneYear.getFullYear()+1)
      const tick=()=>{
        const now = new Date()
        const diff = oneYear - now
        if(diff<=0){el('countdown').textContent = 'üéâ Happy 1‚ÄëYear!';return}
        const d=Math.floor(diff/86400000), h=Math.floor(diff%86400000/3600000), m=Math.floor(diff%3600000/60000), s=Math.floor(diff%60000/1000)
        el('countdown').textContent = `${d}d ${h}h ${m}m ${s}s`
        requestAnimationFrame(()=>setTimeout(tick,1000))
      }
      tick()
    }

    // Edit modal (simple prompts to keep single‚Äëfile)
    el('editBtn').onclick = ()=>{
      const me = prompt('Your name (for footer):', state.meName||'')
      if(me!==null) state.meName = me.trim()||'Me'
      const partner = prompt("Partner's name (headings):", state.partnerName||'')
      if(partner!==null) state.partnerName = partner.trim()||'My Love'
      const dateStr = prompt('When did you start dating? (YYYY-MM-DD)', state.startDate||'')
      if(dateStr!==null){
        const ok = /\d{4}-\d{2}-\d{2}/.test(dateStr)
        state.startDate = ok?dateStr:null
      }
      store.set(state); syncUI(); popHearts(24)
    }

    // Music embed
    function embedMusic(url){
      const box = el('musicEmbed'); box.innerHTML = ''
      try{
        if(url.includes('spotify.com/playlist')||url.includes('spotify.com/track')){
          const src = url.replace('/playlist/','/embed/playlist/').replace('/track/','/embed/track/')
          box.innerHTML = `<iframe style="border-radius:12px" src="${src}" width="100%" height="152" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>`
        } else if(url.includes('music.apple.com')){
          box.innerHTML = `<iframe allow="autoplay *; encrypted-media *;" frameborder="0" height="175" style="width:100%;max-width:660px;overflow:hidden;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation" src="https://embed.music.apple.com/us/playlist/${encodeURIComponent(url.split('playlist/')[1]||'')}"></iframe>`
        } else {
          box.textContent = 'Paste a Spotify or Apple Music link.'
        }
      }catch(e){ box.textContent = 'Could not embed this link.' }
    }

    el('musicInput').addEventListener('keydown',e=>{
      if(e.key==='Enter'){
        state.musicUrl = e.target.value.trim(); store.set(state); embedMusic(state.musicUrl)
      }
    })

    // Tiny quiz (edit questions/answers below)
    const quizData = [
      {q:"Our first date spot was‚Ä¶", opts:["Mall food court","That taco place","The park"], answer:1},
      {q:"Our inside joke emoji is‚Ä¶", opts:["üê£","ü¶ñ","üõº"], answer:0},
      {q:"The movie we watched that week was‚Ä¶", opts:["Dune","Frozen","Spider‚ÄëVerse"], answer:2},
    ]
    const quizEl = el('quiz')
    quizData.forEach((item, i)=>{
      const wrap = document.createElement('div');
      wrap.innerHTML = `<p><q>${item.q}</q></p>` + item.opts.map((o, j)=>`<label class="opt"><input type="radio" name="q${i}" value="${j}"/> ${o}</label>`).join('')
      quizEl.appendChild(wrap)
    })
    el('checkQuiz').onclick = ()=>{
      let correct=0
      quizData.forEach((item,i)=>{
        const chosen = document.querySelector(`input[name=q${i}]:checked`)
        const labels = Array.from(document.querySelectorAll(`input[name=q${i}]`)).map(x=>x.parentElement)
        labels.forEach(l=>{l.classList.remove('correct','wrong')})
        if(chosen){
          if(+chosen.value===item.answer){correct++; chosen.parentElement.classList.add('correct')}
          else {chosen.parentElement.classList.add('wrong')}
        }
      })
      el('quizResult').textContent = `Score: ${correct}/${quizData.length}`
      popHearts(10)
    }

    // Typewriter
    const msg = "I‚Äôm grateful for seven months of us ‚Äî for the jokes that make no sense to anyone else, for your kindness, and for the way you make normal days feel special. You‚Äôre my favorite notification."
    const typeEl = el('typewriter')
    let i=0; (function type(){ if(i<=msg.length){ typeEl.textContent = msg.slice(0,i++); setTimeout(type,18)} })()

    // Hearts + Confetti
    const hearts = el('hearts')
    function spawnHeart(x){
      const h = document.createElement('div'); h.className='heart'; h.textContent = ['‚ù§','üíñ','üíó','üíò'][Math.floor(Math.random()*4)]
      h.style.left = (x ?? Math.random()*100)+'vw';
      h.style.animationDuration = (8+Math.random()*8)+'s';
      h.style.fontSize = (16+Math.random()*30)+'px';
      hearts.appendChild(h); setTimeout(()=>h.remove(),14000)
    }
    function popHearts(n){ for(let k=0;k<n;k++) setTimeout(()=>spawnHeart(), k*60) }
    for(let k=0;k<18;k++) spawnHeart()

    // Confetti burst using simple divs
    function confetti(){
      for(let i=0;i<120;i++){
        const p = document.createElement('div')
        p.style.position='fixed'; p.style.width='6px'; p.style.height='10px';
        p.style.left = (window.innerWidth/2)+'px'; p.style.top='10vh';
        p.style.background = `hsl(${Math.random()*360},100%,70%)`;
        p.style.transform=`translate(${(Math.random()-0.5)*8}px,0)`
        p.style.opacity=.95; p.style.zIndex=9999; p.style.borderRadius='2px';
        document.body.appendChild(p)
        const dx = (Math.random()-0.5)* (window.innerWidth*0.9)
        const dy = 120 + Math.random()*600
        const rot = (Math.random()*720-360)
        p.animate([
          {transform:`translate(0,0) rotate(0deg)`},
          {transform:`translate(${dx}px, ${dy}px) rotate(${rot}deg)`}
        ],{duration:1200+Math.random()*1200, easing:'cubic-bezier(.15,.6,.2,1)'}).onfinish=()=>p.remove()
      }
    }

    el('confettiBtn').onclick = ()=>{ confetti(); popHearts(12) }

    // Share link
    el('shareBtn').onclick = async ()=>{
      try{
        await navigator.share({title:document.title, text:'Happy 7 Months ‚ù§Ô∏è', url: location.href})
      } catch(e) {
        navigator.clipboard.writeText(location.href)
        alert('Link copied!')
      }
    }

    // Init
    syncUI()
  </script>
</body>
</html>
